# Настройка окружения для проекта

## Установка ***pyenv***

1. Установить зависимости. ***Pyenv*** требует наличия ряда библиотек и инструментов для компиляции и работы с различными версиями Python. Установить их командой:
```sh
sudo apt update; sudo apt install -y make build-essential libssl-dev zlib1g-dev \
libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm \
libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev \
python-openssl git
```

2. Установить ***pyenv***. ***Pyenv*** можно установить с помощью команды ***curl***, которая загрузит и установит ***pyenv***:
```sh
curl https://pyenv.run | bash
```

3. Добавить ***pyenv*** в свой профиль оболочки (например, *.bashrc*). Это необходимо для того, чтобы ***pyenv*** был доступен в вашем терминале:
```sh
echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bashrc
echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(pyenv init --path)"' >> ~/.bashrc
```

4. Перезапустить терминал или выполнить команду ***source***, чтобы применить изменения:
```sh
source ~/.bashrc
```

5. Установить дополнительный плагин, который позволяет управлять виртуальными окружениями:
```sh
git clone https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv
```

6. Добавить плагин ***virtualenv*** в профиль оболочки:
```sh
echo 'eval "$(pyenv virtualenv-init -)"' >> ~/.bashrc
```

7. Установить необходимую версию Python. В данном случае 3.10.15:
```sh
pyenv install 3.10.15
```

8. Создать локальное виртуальное окружение в папке проекта, с версией python 3.10.15:
```sh
pyenv local 3.10.15
```
что создает в папке проекта файл ***.python-version*** и *python* для данной папки будет уже 3.10.15

## Возможности ***pyenv***

Список доступных для установки версий:
```sh
pyenv install -l 
```
Список установленных версий:
```sh
pyenv versions
```
Удаление определенной версии *python*, на примере удаления версии *python 3.10.15*:
```sh
pyenv uninstall 3.10.15
```
Установка версии по умолчанию для всей системы, на примере 3.10.15:
```sh
pyenv global 3.10.15
```
Можно установить версию Python для конкретного проекта, находясь в корневой папке проекта. На примере 3.10.15:
```sh
pyenv local 3.10.15
```
Чтобы переключиться на другую версию Python, просто команда **pyenv global** или **pyenv local** с нужной версией. Например:
```sh
pyenv global 3.10.15
``` 
Можно создать виртуальное окружение, с наименованием *venv_3.10.15* к примеру с версией python 3.10.15, которое можно использовать для других проектов, установив их (с учетом к примеру уже всех зависимостей) локально для директории где локализуем версию, или глобально для системы:
```sh
pyenv virtualenv 3.10.15 venv_3.10.15
pyenv local venv_3.10.15
```

## Настройка виртуального окружения  
(после назначения папке проекта корректной версии ***python*** с помощью ***pyenv***)

1. Создать виртуальное окружение:
```sh
python -m venv venv
```

2. Активировать созданное виртуальное окружение:
```sh
source venv/bin/activate
```
в начале командной строки в скобках появится имя виртуального окружения, что указывает на успешную активацию:
```sh
(venv) dax@dax-VirtualBox:~/skillbox/drones/drones/m04$ 
```
для деактивации виртуального окружения:
```sh
deactivate
```

3. Установить модуль с шаблоном из папки src, c флагом -e (editable) для возможности отладки пакета:
```sh
pip install -e .
```

4. Установить все остальные необходимые зависимости:
```sh
pip install -r requirements.txt
```